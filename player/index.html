<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Player</title>
  <script src="dist/howler/howler.core.js"></script>
  <script src="dist/elm/main.js"></script>
</head>
<body>
<body>
  <div id="elm-app"></div>
</body>

<script>

var sound;

var app = Elm.Main.init({
  node: document.getElementById('elm-app'),
  flags: [
    {
      "name": "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
      "artist": "mock",
      "album": "mock",
      "blobref": "mock",
    }
  ],
});

app.ports.init.subscribe(function(track) {
    console.log(track)
    sound = new Howl({
      src: track,
      html5: true,
      volume: 0.1,
      onplay: function(id) {
        console.log("player: starting to play: ", id)
      },
      onpause: function(id) {
        console.log("player: pausing player: ", id)
      },
      onstop: function(id) {
        console.log("player: stopping player: ", id)
      }
    });
});

app.ports.play.subscribe(function() {
  sound.play();
});

app.ports.pause.subscribe(function() {
  sound.pause();
});

app.ports.stop.subscribe(function() {
  sound.stop();
});

</script>

</html>


